{% extends 'base.html' %}

{% load widget_tweaks %}

{% block content %}
<!-- cases/templates/cases/case_detail.html -->
<div class="mt-5">
    <h3>Case Documents
        <a href="{% url 'cases:document_create' case_pk=object.pk %}" class="btn btn-sm btn-success">
            <i class="fas fa-plus"></i> Add Document
        </a>
    </h3>
    
    <div class="list-group mt-3">
        {% for document in object.documents.all %}
            <div class="list-group-item d-flex justify-content-between align-items-center">
                <div>
                    <h5 class="mb-1">{{ document.title }}</h5>
                    <small class="text-muted">
                        {{ document.category }} - {{ document.uploaded_at|date:"M d, Y" }}
                    </small>
                </div>
                <div>
                    <a href="{{ document.file.url }}" class="btn btn-sm btn-primary" download>
                        <i class="fas fa-download"></i>
                    </a>
                    <a href="{% url 'cases:document_delete' pk=document.pk %}" class="btn btn-sm btn-danger">
                        <i class="fas fa-trash"></i>
                    </a>
                </div>
            </div>
        {% empty %}
            <div class="alert alert-info">No documents found for this case</div>
        {% endfor %}
    </div>
</div>
<!-- cases/templates/cases/case_detail.html -->
    <h1 class="mb-4"> {% if object %}
        <a class="btn btn-sm btn-info" href="{% url 'cases:client_update' object.client.pk %}"><i class="fas fa-edit"></i> Edit</a>{% else %}
        Add {% endif %} Case</h1>
    <form method="post" novalidate>
        {% csrf_token %}
        <div class="form-row">
            <div class="form-group col-md-6">
                <label for="{{ form.title.id_for_label }}">Title:</label>
                <input type="text" class="form-control" id="{{ form.title.id_for_label }}"
                       name="{{ form.title.html_name }}" value="{{ form.title.value|default:'' }}" required>
            </div>
            <div class="form-group col-md-6">
                <label for="{{ form.client.id_for_label }}">Client:</label>
                {{ form.client|add_class:"form-control" }}
            </div>

        </div>

        <div class="form-row">
            <div class="form-group col-md-6">
                <label for="{{ form.lawyer.id_for_label }}">Lawyer:</label>
                {{ form.lawyer|add_class:"form-control" }}
            </div>
            <div class="form-group col-md-6">
                <label for="{{ form.status.id_for_label }}">Status:</label>
                {{ form.status|add_class:"form-control" }}
            </div>
        </div>

        <div class="form-group">
            <label for="{{ form.description.id_for_label }}">Description:</label>
            <textarea class="form-control" id="{{ form.description.id_for_label }}"
                      name="{{ form.description.html_name }}"
                      rows="5" required>{{ form.description.value|default:'' }}</textarea>
        </div>
        </br>

        <button type="submit" class="btn btn-primary">Save</button>
        <a class="btn btn-secondary" href="{% url 'cases:case_list' %}">Cancel</a>


    </form>


{% endblock %}

